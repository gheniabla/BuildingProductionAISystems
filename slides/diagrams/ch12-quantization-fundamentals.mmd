flowchart TB
    subgraph formats ["PRECISION FORMATS"]
        direction TB
        fp32["FP32 — 32 bits<br/>Sign: 1, Exponent: 8, Mantissa: 23<br/>Range: +/-3.4 x 10^38"]
        fp16["FP16 — 16 bits<br/>Sign: 1, Exponent: 5, Mantissa: 10<br/>Range: +/-65504"]
        bf16["BF16 — 16 bits<br/>Sign: 1, Exponent: 8, Mantissa: 7<br/>Range: Same as FP32, less precision"]
        int8["INT8 — 8 bits<br/>Range: -128 to 127"]
    end

    subgraph process ["QUANTIZATION PROCESS"]
        direction TB
        orig["Original FP32 weights<br/>-0.234, 0.891, -0.012, 0.567, -0.999, 0.123, 0.456, -0.789"]
        scale["Determine scale and zero-point<br/>scale = (max - min) / 255 = 0.0074<br/>zero_point = round(-min / scale) = 135"]
        quant["Quantized INT8 weights<br/>103, 255, 133, 212, 0, 152, 197, 28"]
        orig --> scale --> quant
    end

    subgraph ptq ["1. Post-Training Quantization — PTQ"]
        direction LR
        trained["Trained Model"] --> calibration["Calibration"] --> quantized_ptq["Quantized Model"]
        ptq_desc["No retraining needed · Faster to implement · May lose more quality"]
        calibration -.-> ptq_desc
    end

    subgraph qat ["2. Quantization-Aware Training — QAT"]
        direction LR
        fake_quant["Training with<br/>Fake Quantization"] --> quantized_qat["Quantized Model"]
        qat_desc["Model learns to be robust · Better quality · Requires retraining"]
        fake_quant -.-> qat_desc
    end

    formats --> process
    process --> ptq
    process --> qat

    classDef client fill:#3B82F6,stroke:#1D4ED8,color:#FFFFFF
    classDef gateway fill:#EF4444,stroke:#B91C1C,color:#FFFFFF
    classDef service fill:#4F46E5,stroke:#3730A3,color:#FFFFFF
    classDef data fill:#10B981,stroke:#047857,color:#FFFFFF
    classDef external fill:#F59E0B,stroke:#D97706,color:#FFFFFF
    classDef observability fill:#8B5CF6,stroke:#6D28D9,color:#FFFFFF

    class fp32,fp16,bf16,int8 service
    class orig,scale,quant data
    class trained,fake_quant external
    class calibration observability
    class quantized_ptq,quantized_qat client
    class ptq_desc,qat_desc data
