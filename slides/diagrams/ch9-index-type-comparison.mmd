flowchart TD
    title["INDEX TYPE COMPARISON"]:::observability

    title --> HNSW
    title --> IVF
    title --> FLAT

    subgraph HNSW ["1. HNSW (Hierarchical Navigable Small World)"]
        H_L3["Layer 3 (Sparse)"]:::service --> H_L2["Layer 2 (Medium)"]:::service --> H_L1["Layer 1 (Dense)"]:::service
        H_L1 --> H_Perf["O(n log n) build<br/>O(log n) query<br/>High memory"]:::external
        H_Perf --> H_Best["Best for: Most production use cases"]:::client
    end

    subgraph IVF ["2. IVFFlat (Inverted File Flat)"]
        I_C1["Cell 1"]:::service --> I_V1["Vectors"]:::data
        I_C2["Cell 2"]:::service --> I_V2["Vectors"]:::data
        I_Ck["Cell k"]:::service --> I_Vk["Vectors"]:::data
        I_V1 --> I_Perf["O(n) build<br/>O(n/k) query<br/>Medium memory"]:::external
        I_Perf --> I_Best["Best for: Memory-constrained, frequently rebuilt"]:::client
    end

    subgraph FLAT ["3. Flat (Brute Force)"]
        F_Perf["O(n) query<br/>Low memory"]:::external
        F_Perf --> F_Best["Best for: less than 10K vectors or accuracy-critical"]:::client
    end

    classDef client fill:#3B82F6,stroke:#1D4ED8,color:#FFFFFF
    classDef gateway fill:#EF4444,stroke:#B91C1C,color:#FFFFFF
    classDef service fill:#4F46E5,stroke:#3730A3,color:#FFFFFF
    classDef data fill:#10B981,stroke:#047857,color:#FFFFFF
    classDef external fill:#F59E0B,stroke:#D97706,color:#FFFFFF
    classDef observability fill:#8B5CF6,stroke:#6D28D9,color:#FFFFFF
